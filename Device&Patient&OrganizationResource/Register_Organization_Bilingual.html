<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0">
	<title>Register - Organization</title>
	<link href="style.css" rel="stylesheet" type="text/css" media="screen" /> 
	<script src="FormToXML.js"></script>
	<style>
	.topright1{
		position:absolute;
		top:0;
		right:10;
	}
	.topright2{
		position:absolute;
		top:0;
		right:80;
	}
	.topleft1{
		position:absolute;
		top:0;
		left:10;
	}
	.topleft2{
		position:absolute;
		top:0;
		left:100;
	}
	</style>
</head>
   
<body>
	<header class="site-header">
		<div class="clear"></div>
			<div class="inner-wrap">
				<div class="navbar-brand-wpz" id="header">
					<font size="10"></font>
				</div>
			</div>
			<a class="topleft1" href="Register_Device_Bilingual.html">Device</a>
			<a class="topleft2" href="Register_Patient_Bilingual.html">Patient</a>
			<a class="topright1" onclick="SwitchLang('EN')">English</a>
			<a class="topright2" onclick="SwitchLang('CH')">繁體中文</a>
	</header>	
	<div id="forms"></div>		
	
	<script>
		var Lang_EN = ["Organization's Registration", "Organization ID", "Organization Additional ID", "Organization Type", "--Select--", "Healthcare Provider", "Hospital Department", "Organizational Team", "Government", "Insurance Company", "Educational Institute", "Religious Institution", "Clinical Research Sponsor", "Community Group", "Non-Healthcare Business or Corporation", "Other", "Organization Name", "Organization Alias", "Address", "Postal Code", "Person in Charge's Name", "Person in Charge's Phone", "Person in Charge's Email", "Send"]; 
		var Lang_CH = ["組織註冊","組織ID", "組織其他ID", "機構類型", "", "", "", "", "", "", "", "", "", "", "", "", "組織名稱", "組織別名", "聯絡地址", "聯絡地址郵遞區號", "負責人姓名", "負責人電話", "負責人信箱", "送出"]; 
		var LangArr;
		
		if (getCookie("userlang") == "") {
			LangArr= Lang_CH;
		}
		else if (getCookie("userlang") != "") {		
			if (getCookie("userlang")=="EN"){
				LangArr= Lang_EN;
				setCookie("userlang", "EN", 30);
			}
			if (getCookie("userlang")=="CH"){
				LangArr= Lang_CH;
				setCookie("userlang", "CH", 30);
			}
		}
		document.getElementById('header').innerHTML="<font size='10'>" + LangArr[0] + "</font>";
		document.getElementById('forms').innerHTML='<form class="contact100-form" id="form1" name="form1"><table align="center" style="border: solid 2px gray;"><tr><td>' + LangArr[1] + '<font color="red"> *</font><br><input type="text" name="id" size="50"><br></td></tr><tr><td>' + LangArr[2] + '<br><input type="text" name="identifier" size="50"><br></td></tr><tr><td>' + LangArr[3] + '<br><select name="code" style="width:300px;"><option title="empty" align="center">' + LangArr[4] + '</option><option title="prov">' + LangArr[5] + '</option><option title="dept">' + LangArr[6] + '</option><option title="team">' + LangArr[7] + '</option><option title="govt">' + LangArr[8] + '</option><option title="ins">' + LangArr[9] + '</option><option title="edu">' + LangArr[10] + '</option><option title="reli">' + LangArr[11] + '</option><option title="crs">' + LangArr[12] + '</option><option title="cg">' + LangArr[13] + '</option><option title="bus">' + LangArr[14] + '</option><option title="other">' + LangArr[15] + '</option></select></td></tr><tr><td>' + LangArr[16] + '<font color="red"> *</font><br><input type="text" name="name" size="50"><br></td></tr><tr><td>' + LangArr[17] + '<br><input type="text" name="alias" size="50"><br></td></tr><tr><td>' + LangArr[18] + '<font color="red"> *</font><br><input type="text" name="address" size="50"></td></tr><tr><td>' + LangArr[19] + '<font color="red"> *</font><br><input type="text" name="postalCode" size="50"></td></tr><tr><td>' + LangArr[20] + '<font color="red"> *</font><br><input type="text" name="given" size="50"></td></tr><tr><td>' + LangArr[21] + '<br><input type="number" id="phone" name="phone" style="width:407px;"><br></td></tr><tr><td>' + LangArr[22] + '<br><input type="email" name="email" size="50"><br></td></tr><tr><td align="center"><input style="width:100%" type="button" value="' + LangArr[23] + '" onclick="validateForm();"></td></tr></table></form>';	
			
		function SwitchLang(choosen){
			setCookie("userlang", choosen, 30);
			if (choosen=="EN")
				LangArr= Lang_EN;
			if (choosen=="CH")
				LangArr= Lang_CH;		
			document.getElementById('header').innerHTML="<font size='10'>" + LangArr[0] + "</font>";
			document.getElementById('forms').innerHTML='<form class="contact100-form" id="form1" name="form1"><table align="center" style="border: solid 2px gray;"><tr><td>' + LangArr[1] + '<font color="red"> *</font><br><input type="text" name="id" size="50"><br></td></tr><tr><td>' + LangArr[2] + '<br><input type="text" name="identifier" size="50"><br></td></tr><tr><td>' + LangArr[3] + '<br><select name="code" style="width:300px;"><option title="empty" align="center">' + LangArr[4] + '</option><option title="prov">' + LangArr[5] + '</option><option title="dept">' + LangArr[6] + '</option><option title="team">' + LangArr[7] + '</option><option title="govt">' + LangArr[8] + '</option><option title="ins">' + LangArr[9] + '</option><option title="edu">' + LangArr[10] + '</option><option title="reli">' + LangArr[11] + '</option><option title="crs">' + LangArr[12] + '</option><option title="cg">' + LangArr[13] + '</option><option title="bus">' + LangArr[14] + '</option><option title="other">' + LangArr[15] + '</option></select></td></tr><tr><td>' + LangArr[16] + '<font color="red"> *</font><br><input type="text" name="name" size="50"><br></td></tr><tr><td>' + LangArr[17] + '<br><input type="text" name="alias" size="50"><br></td></tr><tr><td>' + LangArr[18] + '<font color="red"> *</font><br><input type="text" name="address" size="50"></td></tr><tr><td>' + LangArr[19] + '<font color="red"> *</font><br><input type="text" name="postalCode" size="50"></td></tr><tr><td>' + LangArr[20] + '<font color="red"> *</font><br><input type="text" name="given" size="50"></td></tr><tr><td>' + LangArr[21] + '<br><input type="number" id="phone" name="phone" style="width:407px;"><br></td></tr><tr><td>' + LangArr[22] + '<br><input type="email" name="email" size="50"><br></td></tr><tr><td align="center"><input style="width:100%" type="button" value="' + LangArr[23] + '" onclick="validateForm();"></td></tr></table></form>';	
		}
		
		function validateForm()
		{ 	
			var choosenLang=getCookie("userlang");
			if(document.form1.email.value!=''){
				var x = document.form1.email.value;
				var atpos = x.indexOf("@");
				var dotpos = x.lastIndexOf(".");
				if (atpos<1 || dotpos<atpos+2 || dotpos+2>=x.length) {
					if(choosenLang=="EN")
						alert("Not a valid e-mail address");
					else if(choosenLang=="CH")
						alert("E-mail格式錯誤");
					return false;
				}
			}
			
			if(document.form1.id.value==''){
				if(choosenLang=="EN")
					alert("Organization ID must be filled out");
				else if(choosenLang=="CH")
					alert("組織ID尚未填寫");
				return (false);
			}
			if(document.form1.name.value==''){
				if(choosenLang=="EN")
					alert("Organization Name must be filled out");
				else if(choosenLang=="CH")
					alert("組織名稱尚未填寫");
				return (false);
			}
			if(document.form1.address.value==''){
				if(choosenLang=="EN")
					alert("Address must be filled out");
				else if(choosenLang=="CH")
					alert("聯絡地址尚未填寫");
				return (false);
			}
			if(document.form1.postalCode.value==''){
				if(choosenLang=="EN")
					alert("Postal Code must be filled out");
				else if(choosenLang=="CH")
					alert("聯絡地址郵遞區號尚未填寫");
				return (false);
			}
			if(document.form1.given.value==''){
				if(choosenLang=="EN")
					alert("Person in Charge's Name must be filled out");
				else if(choosenLang=="CH")
					alert("負責人姓名尚未填寫");
				return (false);
			}			
			formInputsToXML('form1','Organization');
		}
		
		function setCookie(cname, cvalue, exmin) {
			var d = new Date();
			d.setTime(d.getTime() + (exmin * 60 * 1000));
			var expires = "expires="+d.toUTCString();
			document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
		}

		function getCookie(cname) {
			var name = cname + "=";
			var ca = document.cookie.split(';');
			for(var i = 0; i < ca.length; i++) {
				var c = ca[i];
				while (c.charAt(0) == ' ') {
					c = c.substring(1);
				}
				if (c.indexOf(name) == 0) {
					return c.substring(name.length, c.length);
				}
			}
			return "";
		}
	</script>
</body>
</html>